<!DOCTYPE html>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Muli&effect=fire-animation" rel="stylesheet">
<link href="styles.css" type="text/css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">//inspired by https://coderbyte.com/tutorial/create-a-tic-tac-toe-game-using-html-css-and-jquery</script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!--modal code-->

<script>
$(document).ready(function(){
    $(function() {
        $("#custom-modal").modal('show');
    });

    $("#confirm").on("click", function(){
        $("#custom-modal").modal('hide');
        var $team = $('#selectTeam option:selected').attr("id");
        var $gM = $('#selectGM option:selected').attr("id");
        gameRules($team, $gM);
    });
    function gameRules($team, $gM){
        if ($gM == 'sP'){
            console.log('sP');
            if ($team == 'x'){
                console.log('x');
                var $player2 = 'o';
            } else{
                console.log('o');
                var $player2 = 'x';
            }
        } else{
            console.log('tP');
            if ($team == 'x'){
                console.log('x');
                var $player2 = 'o';
            } else{
                console.log('o');
                var $player2 = 'x';
            }
        }
    }



    //Game logic
    var table = document.querySelector('table');
    var turn = 0;
    var checkedSpots = [0];
    var $t1;
    var $t2;
    var $t3;
    var $t4;
    var $t5;
    var $t6;
    var $t7;
    var $t8;
    var $t9;
    var reduced;
    table.addEventListener('click', function (ev) {
        var serviceID = ev.target.id;
        console.log(serviceID);
        console.log(checkedSpots);
        reduced = checkedSpots.reduce(function (accumulator, currentValue){return accumulator + currentValue;}, 0);
        console.log(reduced);
        if (reduced >= 36){
            //Popup restart button
            console.log("restart?");
        } else{
            console.log("Not over yet!");
        }
        $t1 = $('#1').html();
        $t2 = $('#2').html();
        $t3 = $('#3').html();
        $t4 = $('#4').html();
        $t5 = $('#5').html();
        $t6 = $('#6').html();
        $t7 = $('#7').html();
        $t8 = $('#8').html();
        $t9 = $('#9').html();
        console.log($t1, $t2, $t3, $t4, $t5, $t6, $t7, $t8, $t9);
        if ($t1 == $t2 == $t3 && $t1 == 'x'){//($t1 == $t2 == $t3 && $t1, $t2, $t3 !== "")
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t4 == $t5 == $t6 && $t4 == 'x'){
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t7 == $t8 == $t9 && $t7 == 'x'){
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t1 == $t4 == $t7 && $t1 == 'x'){//Good
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t2 == $t5 == $t8 && $t2 == 'x'){//Good
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t3 == $t6 == $t9 && $t3 == 'x'){//Not good
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t1 == $t5 == $t9 && $t1 == 'x'){
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t3 == $t5 == $t7 && $t3 == 'x'){
            alert('Winner, Winner, Chicken Dinner!');
        } else {
            console.log('No dub.');
        }


        if ($t1 == $t2 == $t3 == 'o'){//($t1 == $t2 == $t3 && $t1, $t2, $t3 !== "")
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t4 == $t5 == $t6 =='o'){
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t7 == $t8 == $t9 == 'o'){
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t1 == $t4 == $t7 == 'o'){//Good
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t2 == $t5 == $t8 == 'o'){//Good
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t3 == $t6 == $t9 == 'o'){//Not good
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t1 == $t5 == $t9 == 'o'){
            alert('Winner, Winner, Chicken Dinner!');
        } else if ($t3 == $t5 == $t7 == 'o'){
            alert('Winner, Winner, Chicken Dinner!');
        } else {
            console.log('No dub.');
        }
        //Mark Spots
        if (checkedSpots.includes(serviceID)){
            console.log('Already Picked!');
            alert('Already picked!');
        } else if(turn % 2 == 0){
            $('#'+serviceID).html("x");
            turn++;
            checkedSpots.push(parseInt(serviceID));
            return turn;
        } else {
            $('#'+serviceID).html("o");
            turn++;
            checkedSpots.push(parseInt(serviceID));
            return turn;
        }
    });




});
</script>
<head>
    <meta charset= "UTF-8">
    <title>TicTacToe</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<html>
<body>
    <h1 style="text-align: center" class="font-effect-fire-animation">TicTacToe</h1>

    <div class="container">
        <table id='board' style="background-color: white;">
            <tr>
                <td id="1"></td><td id="2"></td><td id="3"></td>
            </tr>
            <tr>
                <td id="4"></td><td id="5"></td><td id="6"></td>
            </tr>
            <tr>
                <td id="7"></td><td id="8"></td><td id="9"></td>
            </tr>
        </table>
</div>
<div id='custom-modal' class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #d9d9d9">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Game Settings: Please choose your mode and symbol.</h4>
                </div>
                <div class="modal-body" style="background-color: #cccccc;">
                    <select class="selectGM" id="selectGM">
                        <!--<option value="Team">Select Mode</option>-->
                        <option value="Single Player" id="sP">Single Player</option>
                        <option value="Two Player" id="tP">Two Player</option>
                    </select>
                    <select class="selectPieces" id="selectTeam">
                        <!--<option value="Team">Select Team</option>-->
                        <option value="X" id="x">X</option>
                        <option value="O" id="o">O</option>
                    </select>
                </div>
                    <div class="modal-footer" style="background-color: #d9d9d9">
                        <button id="confirm" style="background-color: #33cc33" type="button" class="btn btn-default" data-dismiss="modal">Confirm</button>
                    </div>
                </div>
            </div>
        </div>


<h3 style="font-size: 15px; color: white; font-faily: Muli; display: inline-block; position: fixed; right: 5px; bottom: 5px;">Made By: Elijah Harbut</h3>
</body>
</html>
